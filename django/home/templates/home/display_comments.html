{% extends 'home/pub_home.html' %}
{% block pub_thread %}
{% load widget_tweaks %}
<h2>スレッド</h2>
<a href="{{request.META.HTTP_REFERER}}">戻る</a>
<!--コメントした後に戻るボタンを押すと機能しないバグあり-->

<table class="container">
    <tr>
        <td>ユーザー名：{{ thread.username }}</td>
        <td>日付：{{ thread.created_datetime }}</td>
    </tr>
    <tr>
        <td colspan="2">タイトル：{{ thread.title }}</td>
    </tr>
    <tr>
        <td colspan="2">コメント{{ thread.content | linebreaks | urlize }}</td>
    </tr>
</table>
<h3>コメント一覧</h3>
{% for comment in comments %}
<table class="container">
    <tr>
        <td>ユーザー名：{{ comment.username }}</td>
        <td>日付：{{ comment.created_datetime }}</td>
    </tr>
    <tr>
        <td colspan="2">コメント{{ comment.comment | linebreaks | urlize }}</td>
    </tr>
</table>
{% endfor %}

<form method="post" action="{% url 'create_comment' %}">{% csrf_token %}
    <input type="hidden" value="{{ thread.id }}" name="thread_id">
    <table>
        <tr>
            <td>ユーザー名：{{ user.username }}</td>
        </tr>
        <tr>
            <td>コメント{{ form.comment | add_class:"form_content" }}</td>
        </tr>
        <tr>
            <td><button type="submit" class="positive_button">create</button></td>
        </tr>
    </table>
</form>
{% endblock %}
